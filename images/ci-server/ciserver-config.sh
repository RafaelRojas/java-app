#!/bin/bash

set -ex

export DEBIAN_FRONTEND=noninteractive

# Update everything before installation
apt-get update
apt-get upgrade -y

apt-get install -y \
  openjdk-8-jdk \
  openjdk-8-jre \
  openjdk-8-jdk-headless \
  openjdk-8-jre-headless
echo "JAVA_HOME=\"/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\"" >> /etc/environment
source /etc/environment

wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -
sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ > /etc/apt/sources.list.d/jenkins.list'
apt-get update -y && apt-get install -y jenkins
systemctl stop jenkins
mkdir --parents /home/jenkins
chown --recursive jenkins /home/jenkins
chmod u+w /home/jenkins
sed -i 's#/var/lib/$NAME#/home/jenkins#g' /etc/default/jenkins
systemctl daemon-reload
systemctl enable jenkins
systemctl start jenkins


echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC5Xoxehx0Cyh4WcFQln5DS5U9uHa69XH3EMXIn8f6Z6ez9lUELovcnS0IZMGEkrBCz9WSrczRIiLEf2ppU6HybhHqugAydF/2M8NxigCQdjwccz21VYFQczSgmBHHkkBQppCqS+1kq/TptLz3s6rl76PaJ+MVMupzwIHw6VRhBctQwE8w8wQ0E5gQ20OpcG8QcXR/e0cazDLx2zhrKKeexacv4Qgu3nKHJ/PPV8MxDz+fRKngjgCxgrjVFD0xoikO9mDykHr8vCizc03OpSlNi+t19C61kQoQbgexvzAP2XDvGalDiWcYCBsg7rRXVSpCioAnFje6WDrXTHA88SCgsktPZZgKTlnYoxcjJ8dUueqwIqyO1MrsDvkxk3NrhBascWz0L4XGAtrEPy4GGVPkbqac4PJZndUKyoyoJDIfGSNvPLkIeTRHnI/RIRHjc07UElOi3DdNAtmJFLcj2W3SD/T8bAQ2V2f7UqfK7xj0+kDAFO3tYwf/Gs5/KgSFiBpUNbjjLCUWjq2dVYHeJtjo5Iie1UchFY8b/TX4oH/q1DcfHWDUercYS/+6R74gFiMDwwtmVw/ekLJnBqd1nx48fy2+OGylvFFPMLcWYXfm7KKPp3xBXszrOEOxyEZgnXev9zj5q/JeeV5yXNoDzSgpFxHe2SpNN/HZT2VKhDJzYsw== rafael@EPMXGUAW037" >> /home/ubuntu/.ssh/authorized_keys

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCxbXo6R+2nXhM7zXTPoqCekMKClNqrkNeWmLXdt4YqYj7igFFQI5KZcbBNdOs0ojRTsc1/uHSvu7OHbi/5fiVOx1N1phmvE8g+XjK4JPY+jTHPmGpodJ/apWA7CjTBueHSerLPGo9uHlIpqcaf2+wUnWteheSMvDknTUXyUAgt0NsvCw76ZBII3DtzWIXWr6wdDtUDRTcNXrmKJjO77oBjFgrzPAAucJ74JcZm/LpgHeXzTLYZ3GaeBnRe+dD0btNw1dH4mMh6Ui7mK726e7ddMVtPwchlzIEAMILzvfx/BSpa1uwN222aXhowZ3ot5OJvflI8nzvx8MV3Le91w+ZiPvK/4LIDEy+WOgsBsq2Fh44rXjzwgBMw52mH0NsO9KAMr9SomJZSO9EHGJ9H2NNnNIPVdX8NLXKeeCGLB0fJ2DnPW0ZKO+wPlHHY2bk7FeuLw/wJzarCuFZUNEy9hHQun1gJ02+fCEGdQrS6ByhypG+Uvooa1EV4zBeyWWNXtuqYyTMsbWUBTwzWFsqdDv2XmMXQ3hg2cELOSW4wWflRopD/isKr0IfHuYLUjynBelXwyvwCV9q414SArFAzM93rWJJtCLpsXc4NjiUXwP3PUSjh95MVl3Eyx/iaOv/Y/UbGsFTg3BrREx8e9YIdS5oyu3d7TXcX9wx/5GL+BRTnSw== diana_fernandez@epam.com" >> /home/ubuntu/.ssh/authorized_keys

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCvk3I0kqKuxSN9GrigA7KM2c+9PIdYFxEmz/jBjeTzIEB25hRpGgS/aQF+htOvrcTvI8MEec98QGsGGEIZ1rN+TS5WJCHWOWnB+yUnWF7XxyJU2TYqUtf2R2k/QbvzWAaZVbuKAnvbriOOY+23MZJXUNFhDMJ2f/tIwu/yrRkzofoQnDo8Qgh89ziwowvLBp7YH0HkgESX08J5CDVP+dCF4yfVqsD2TDnP1fHz8ecT0pbcdwj6ENkG01JQE20o8ZHA8v/3TDntL/jNvV1MzaoN7hTGRFZBQgMwxIk33+xeK4u+K6T8fZt8qt8EVclUWZTtureC4OfAqs7/IaDvYHOwNPpmz982d+vDc5hPPx2jen0Skkdb8FcbvJb6OLW+Sz9aCGiCRua5pl9ZaFbkkmvUkTa2HRCcr3dZIkVOPyunIUjpWwf2TrbPYQqctAixGI50otFveFhjaDl/HHARjMWbXaD1PQIbZyCGfnRY4F5JlipwWR5LCp8lMPJhwUhBFL1v2KgNZr9zgPdjMk8/+4cecoakgCLQoEO1KLbLmG4RkUQdpV9PqLrQAt9PNYDdm6s4URZrHaLKaG9/T/+WxWb7uGiuv+7GtppRM9K/n2rXkxrvnKfCklKsNJ5GFXzIihOmFtMF7/nPCF8FdPdr02E84lRs20pj/fbJT3QCp0vr4w== Eduardo_Garcia1@epam.com" >> /home/ubuntu/.ssh/authorized_keys

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCf5rQQixfWXYXgJX1MQAg8WEeTK2GEHDm/p3SEko/VwbpXqcy21Pr4uZUBotANLMSnwXn+jKAnmDCW6a+sVfUNf8RfOpoClaAj84fOMjpfW1audWRgLYj5DnoCeviFqMZWJGUMaciis8jfDQ1hQZK63HsJn+9vSb0NN9VLrT1ekZEhx1NuaA52BNBOAB8vQTJMechyaX+b3+3fBPANyoqpnOXrsH+M4RT3snrj+xv8IdJb+hGDdrIUhf20WxbSMyqPxiEtSEFLBu1J+C5FNgmO61LeVvzsjsGNKGaveLZnNyms3rRJFVlVohcu1uUlenC/fKpriCgYthG4o51AR2AB Oliver_Rojo@EPMXGUAW0603" >> /home/ubuntu/.ssh/authorized_key


echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCsvc9P8IWFas2UombW5JHgrJaX7mIS7tlfLGr6V6PhcabWVg2nLQwOr48fG4eVrmeo1/jjrcY/Tq78dAJ+UR7ZmqAJf1ySqEfe4e3+xWVxuh2jO3x7KOHn3gVzW35rPUDTGQD/cjG8XQgzbr4h8tW4ILR/XE6OmS0P+IO/TPHOf9VKW4Goevydr/02XCLEdXf8YuE/JT71XAgRJ3aIxzccTPeT0kCXT9jLv9c3TOxvdRO4C46wxZfx1BemAnecK2ajTSzyqYZmYjk9JhTM+Gz84lk9BwI3sTU3zywUf12IOQvVU7nJqXwiMBeZMIY//wCbr0Y1W4UBU+s0KnEeoGmJJ7jsCGvvdr9k6xxsbyeGHzO4+8aMrzgB17FolSMAsYnim6p5+JruRfuF9q9CqVaPHmTvDP9X9ZU0UW5aeNcoJ45wTvgsJ620+u5xCIkFjAV/mOVZqw9fBrN1ezn1hPxnHdctbY7FauDD+t4vajFpjeb12NUUUuSPVtQ3JpCUI+SOoxcA80ATQTgVA78iIklg9a5BqwP8Y9fs9HUiWwFObQgZT2LqESoHUKzrY5QYgfehdYO1iJsnii+zIGK30stv/GDmT+pzqWqIpSqDIL+we4cXr2M8VSHwdCgY5nZOwBeHZyi1z2Ve/xi98er+pgAD0dHPc/+QN/PDsxgRIFDxMw== " >> /home/ubuntu/.ssh/authorized_key 

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCyoNFpmXjj7rP9c9V3JsFjTMZbj0BRAN5W+4vfjqhmcosXDTCb55wrLiR5vwB47NY+A9VO6gX2MeaQeU/hsP3yhZm7ZoDO2s/aDRtAPQ09cGv0N7WY3rN2j+vZl8eUakfUvaKaBbbH/8TJuoIRV7SXePOo/6AmKpStQ3fjPVaGneAOhNh5mstzD/G7wHCmpmDXYQJKg1Hh6WOkf2bCUP8HNQx8B21E6rBAZFco2Hp9WaNl6Y4x6v4gf145T/myRJdqcn8C98HXhruSIW0etmTWXlBvzZAALtNVeOjEl8rRrC7QSF08PYpzAs0o/es1XsEBPK51/uWAL1z3vWEjtYXH0nX+857m9pMlbmlI93ufus0uTHq/9bdwMZI3RxcRCz8+mpCCkuB9oJwSkbTSJw/oTfFIQMZOT43QzQK5ZK/P+F+tiLhHE6P6/vCF2j2zzgpdeKN6VuRaOsCvHbeoiGNG4HBn9O7kUPAwEhSLnhfKA6haRlFwm3jbenwubCeC7atRMMRq7EJtnFXobDehQuzAUFnJsioA6cZERfZP2UOtYVbXtaUHdgXenqrggAAzgwtSWp96W5DHbfF3WKrJzDfjcs2M+peK5UFg2IX/KF6c++lB/zi9lto10ka3JgZTSyL2jacMNvWGL4UOdq3njbjIHQ34aWqa5TqJGoQ0aSPkRw== pablo_ramirez@epam.com" >> /home/ubuntu/.ssh/authorized_key

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDTBItZi6my9tc9UK7G1faVL7dF8ENinuWVr4xvJPaVRhG5MtWI+Oyf0QkJP6AcJHmnvyBPnEDi4rDaKzc//pYHxxat20lXma+jwc/K677LFcz8wweyXDo93VQeGCcB562MuqxXJHBBJqTyconvCYiISdfv3wR6li7oSm9mLABMK2tYAe8zXMajbfe4NM0HzxMAKPIS2l4q5kCfhV7tj8yONb1a1I12wwOWyvKXXUbCphPtco5mAPjD69i+P6CZleZuf67pgbd1eZLr36n1yqxKCdgvGgu3UQH1hnIMtlABQtreu/zME0avbhFWCJ9eBjcepuyLNWILWizG7QWKIO7qP5N7vK1Po+d/tXF1Bt2+iFmtvKfn0gYHvdO5eo/snEcMOJAzgaPzr1dtt+LJwZ7RLvlkP5e+GFk1KXec3Rg2FajeW/oHyzrS9Jznq/81ntozrdRDIpu92RsIuXJKHRsg9oqtMSJfcyB6TxKUKIIY6N+abontip+q+vv7Mju4ake65LZIkMspIHCWUzuypfGleNymgzqca5J9nBGgYSPb7FTT5sHOuh4mtZn1sVw4wkxrmcuN3/3eivPL49vCGg/ynHbCWftLGvzuTm8BCBkjFm6wRrzg1Y72pRae6dSOrTkSpYzXXmxcDjitP78mQbDaop/UHxXzhGQ98gSVVALFNQ== sergio_nunez@epam.com" >> /home/ubuntu/.ssh/authorized_key

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCldgoLFEgnaoQ4G4hJrIJD9V6jJ/CkCEeATk6Yolhr33xNlNL/vJkJNtmaDyRajfJiRu5l0sEo4UVu6bvFTarCCjxLiTb/6o3X22iJH7CCkGjqgWjk1xwIVD07NJRj/v5At2IxGtZlB8m6VozPawGwAkOZDprQcR0POjO3h0/sJgq2mdp5FWxsCqyizsaLSEiEH0v186gh1DIfDcXuC6673RfvjnRkQvMbZg0Wwa+GmTvetFfmhfCQ6Xe2TtoCqYFT4Pd1KqODx2SShH5bqtNhvCjCkOi81O0B25t2t+axR3750goxltynQAziEgpf+LlNC740xHCdW52xbiNZ5Y8R Victor_Bucio@epam.com" >> /home/ubuntu/.ssh/authorized_key
